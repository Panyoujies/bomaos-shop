<!DOCTYPE html>
<html>
<head>
    <:include file="./common/title.html"
              websiteName="${products.name!} - ${website.websiteName}"
              keywords="${website.keywords}"
              description="${website.description}"
              favicon="${website.favicon}"/>
    <link rel="stylesheet" href="${ctxPath}/theme/night/css/product.css"/>
    <style>
        .ew-banner ._avatar {
            z-index: 800;
            position: absolute;
            top: 165px;
            left: 31px;
            width: 100%;
            height: 100%;
            overflow: hidden;
            -webkit-box-shadow: none;
            -moz-box-shadow: none;
            box-shadow: none;
        }

        .ew-banner ._avatar .imgContainer {
            width: 80px;
            height: 80px;
            border-radius: 5px;
            overflow: hidden;
            border: 2px solid #1f1f1f !important;
            background-color: #000;
        }

        .ew-banner img {
            display: block;
        }

        ._avatar img {
            width: 100%;
            height: 100%;
            border-radius: 3px;
        }

        .spaceProfileCard__line {
            position: absolute;
            left: 125px;
            top: 180px;
        }

    </style>
</head>
<body class="page-no-scroll">
<div class="page-loading">
    <div class="ball-loader">
        <span></span><span></span><span></span><span></span>
    </div>
</div>
<!-- header -->
<:include file="./common/header.html" websiteName="${website.websiteName}" websiteLogo="${website.websiteLogo}"/>

<!-- banner -->
<div class="ew-banner" style="top: -55px;">
    <div class="layui-container" style="text-align: center; padding-bottom: 100px; padding-top: 150px; text-shadow: 0 1px 1px rgb(0 0 0 / 20%); background-size: cover; background-attachment: scroll; background-position: center; box-sizing: border-box; overflow: hidden; background-image: linear-gradient(to top, rgb(0 0 0), rgba(0,0,0,0)),url(<:if test="${products.indexLogo == null || products.indexLogo == ''}">'../theme/night/images/index_logo.png'</:if><:if test="${products.indexLogo != null || products.indexLogo != ''}">${products.indexLogo!}</:if>); filter: blur(1px);">
    </div>
    <div class="_avatar">
        <div class="imgContainer user-info-head" id="userInfoHead">
            <img src="<:if test="${products.imageLogo == null || products.imageLogo == ''}">../theme/night/images/info_logo.png</:if><:if test="${products.imageLogo != null || products.imageLogo != ''}">${products.imageLogo!}</:if>" alt="">
        </div>
        <i class="i-work-sex-30-0 posa avatar-sex"></i>
    </div>
    <div class="cl spaceProfileCard__line">
        <a style="color: #ffffff; font-size: 17px; text-shadow: 0 1px 1px rgb(0 0 0 / 50%);" title="开心购物每一天！">开心购物每一天！</a>
    </div>
</div>

<!-- goods-card -->
<div class="layui-container body-card" style="margin-bottom: 15px;">
    <div class="layui-row layui-col-space15">
        <!-- 左 -->
        <div class="layui-col-sm12 layui-col-md8">
            <div class="layui-card zlian-card-bottom" style="border-radius: 5px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">
                <div class="layui-card-header">
                    <img class="is-title-image" src="${ctxPath}/theme/night/images/present.svg">
                    <span class="is-title-text">商品介绍</span>
                    <:if test="${isCoupon >= 1}">
                        <span class="el-tag el-tag--light pull-right"
                              style="top: 10px; position: relative; font-weight: lighter; margin-left: 10px;">券</span>
                    </:if>
                    <:if test="${products.restricts >= 1}">
                        <span class="el-tag el-tag--danger el-tag--light pull-right"
                              style="top: 10px; position: relative; font-weight: lighter; margin-left: 10px;">限购: ${products.restricts!}</span>
                    </:if>
                    <:if test="${products.shipType == 1}">
                        <span class="el-tag el-tag--warning el-tag--light pull-right"
                              style="top: 10px; position: relative; font-weight: lighter; margin-left: 10px;">手动发货</span>
                    </:if>
                    <:if test="${products.shipType == 0}">
                        <span class="el-tag el-tag--success el-tag--light pull-right"
                              style="top: 10px; position: relative; font-weight: lighter; margin-left: 10px;">自动发货</span>
                    </:if>
                </div>
                <div class="layui-card-body" style="padding: 15px 15px; font-size: 17px;">
                    <div class="layui-row layui-col-space15 goods-info-group">
                        <div class="layui-col-xs12 layui-col-sm5 layui-col-md4 zlian-col-image">
                            <div class="zlian-product-image" style="background-image: linear-gradient(to right, rgba(0,0,0,0.05), rgba(0,0,0,0.05)), url(<:if test="${products.imageLogo == null || products.imageLogo == ''}">'../theme/night/images/info_logo.png'</:if><:if test="${products.imageLogo != null || products.imageLogo != ''}">${products.imageLogo!}</:if>)"></div>
                        </div>
                        <div class="layui-col-xs12 layui-col-sm7 layui-col-md8 goods-info">
                            <div style="padding: 0px;">
                                <div class="weui-cells">
                                    <div class="weui-cell">
                                        <div class="weui-cell__bd">商品名称</div>
                                        <div class="weui-cell__ft">${products.name!}</div>
                                    </div>
                                    <div class="weui-cell">
                                        <div class="weui-cell__bd">商品分类</div>
                                        <div class="weui-cell__ft">${classifyName!}</div>
                                    </div>
                                    <div class="weui-cell">
                                        <div class="weui-cell__bd">商品单价</div>
                                        <div class="weui-cell__ft">
                                            <:if test="${products.price == 0.00}">
                                                免费
                                            </:if>
                                            <:if test="${products.price != 0.00}">
                                                ${products.price!}
                                            </:if>
                                        </div>
                                    </div>
                                    <div class="weui-cell-bottom">
                                        <div class="weui-cell__bd">商品库存</div>
                                        <div class="weui-cell__ft" id="cardsCount"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="layui-card zlian-card-controller" style="border-radius: 5px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">
                <div class="layui-card-header">
                    <img src="${ctxPath}/theme/night/images/details.svg">
                    商品详情
                    <span class="pull-right" style="font-weight: 400; font-size: 16px;">请详细阅读如下说明</span>
                </div>
                <div class="layui-card-body" style="padding: 15px 15px">
                    <div class="list_info">
                        ${products.pdInfo!}
                    </div>
                </div>
            </div>
        </div>

        <div class="layui-col-sm12 layui-col-md4">
            <:if test="${products.isWholesale == 1}">
                <div class="layui-card"
                     style="border-radius: 5px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">
                    <div class="layui-card-header">
                        <img src="${ctxPath}/theme/night/images/wholesale.svg">
                        批发价格
                        <:if test="${products.isWholesale == 1}">
                            <span class="el-tag el-tag--warning el-tag--light pull-right"
                                  style="top: 10px; position: relative; font-weight: lighter;">折扣</span>
                        </:if>
                    </div>
                    <div class="layui-card-body" style="padding: 15px 15px;">

                        <div class="weui-collas">
                            <:for items="${wholesaleList}" var="item">
                                <:if test="${item.id == '0'}">
                                    <div class="weui-colla">
                                        <div class="weui-colla__bd">购买数量满${item.number}个或以上每个</div>
                                        <div class="weui-colla__ft">
                                            <span class="el-tag el-tag--success el-tag--light">￥ ${item.money}</span>
                                        </div>
                                    </div>
                                </:if>
                                <:if test="${item.id != '0'}">
                                    <div class="weui-colla" style="border-top: 1px solid #2d2d2d;">
                                        <div class="weui-colla__bd">购买数量满${item.number}个或以上每个</div>
                                        <div class="weui-colla__ft">
                                            <span class="el-tag el-tag--success el-tag--light">￥ ${item.money}</span>
                                        </div>
                                    </div>
                                </:if>
                            </:for>
                        </div>
                    </div>
                </div>
            </:if>
            <div class="layui-card zlian-card-pc" style="border-radius: 5px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">
                <div class="layui-card-header">
                    <img src="${ctxPath}/theme/night/images/buy.svg">
                    购买信息
                </div>
                <div class="layui-card-body" style="padding: 15px 15px 5px 15px;">
                    <form class="layui-form" id="formBasForm" lay-filter="formBasForm">
                        <div class="layui-form-item">
                            <label class="layui-form-label layui-form-required">电子邮件</label>
                            <div class="layui-input-block">
                                <input name="contact" id="contact" class="layui-input" placeholder="用于查询或接收卡密"/>
                            </div>
                        </div>
                        <:if test="${products.isPassword == 1}">
                            <div class="layui-form-item">
                                <label class="layui-form-label layui-form-required">查询密码</label>
                                <div class="layui-input-block">
                                    <input name="password" id="password" placeholder="输入用于查询的密码" class="layui-input"
                                           lay-verType="tips"/>
                                </div>
                            </div>
                        </:if>
                        <:if test="${isCustomize == 1}">
                            <:for items="${customizeList!}" var="item">
                                <div class="layui-form-item">
                                    <label class="layui-form-label layui-form-required" style="width: auto; margin-right: 1em; min-width: 4em; text-align-last: justify;">${item.name}</label>
                                    <div class="layui-input-block">
                                        <input name="${item.field}" id="${item.field}" placeholder="输入${item.name}" class="layui-input" lay-verType="tips"/>
                                    </div>
                                </div>
                            </:for>
                        </:if>
                        <div class="layui-form-item">
                            <label class="layui-form-label layui-form-required">购买数量</label>
                            <div class="layui-input-block">
                                <div class="input-group order-number-box">
                                    <div class="input-group-prepend sub">
                                        <button class="layui-btn layui-btn-primary" type="button">
                                            <img src="${ctxPath}/theme/night/images/sub.svg" style="width: 25px">
                                        </button>
                                    </div>
                                    <input type="text" id="orderNumber" name="number" class="layui-input" required=""
                                           lay-verify="required|order_number" value="1" disabled>
                                    <div class="input-group-append add">
                                        <button class="layui-btn layui-btn-primary" type="button">
                                            <img src="${ctxPath}/theme/night/images/add.svg" style="width: 25px">
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                    <:if test="${isCoupon >= 1}">
                        <div class="layui-form-item">
                            <label class="layui-form-label layui-form-required" style="width: auto; margin-right: 1em; min-width: 4em; text-align-last: justify;">优惠券</label>
                            <div class="layui-input-block">
                                <input name="coupon" id="coupon" placeholder="输入优惠券代码" class="layui-input"
                                       lay-verType="tips"/>
                            </div>
                        </div>
                    </:if>
                </div>
                <div class="pay-type-group">
                    <div class="layui-row layui-col-space15">
                        <:for items="${paysList}" var="item">
                            <:if test="${item.andIncrement == 0}">
                                <:if test="${item.driver=='mqpay_wxpay' || item.driver=='zlianpay_wxpay' || item.driver=='yungouos_wxpay' || item.driver=='xunhupay_wxpay' || item.driver=='jiepay_wxpay' || item.driver=='payjs_wxpay' || item.driver=='wxpay_h5' || item.driver=='wxpay'}">
                                    <div class="layui-col-xs12 layui-col-sm6 layui-col-md6">
                                        <div class="pay-type-wexin active" data-id="${item.driver}">
                                            <svg t="1617264231274" class="icon" viewBox="0 0 1024 1024"
                                                 version="1.1"
                                                 xmlns="http://www.w3.org/2000/svg" p-id="2411" width="32"
                                                 height="32"
                                                 style=" vertical-align: middle;">
                                                <path d="M395.846 603.585c-3.921 1.98-7.936 2.925-12.81 2.925-10.9 0-19.791-5.85-24.764-14.625l-2.006-3.864-78.106-167.913c-0.956-1.98-0.956-3.865-0.956-5.845 0-7.83 5.928-13.68 13.863-13.68 2.965 0 5.928 0.944 8.893 2.924l91.965 64.43c6.884 3.864 14.82 6.79 23.708 6.79 4.972 0 9.85-0.945 14.822-2.926L861.71 282.479c-77.149-89.804-204.684-148.384-349.135-148.384-235.371 0-427.242 157.158-427.242 351.294 0 105.368 57.361 201.017 147.323 265.447 6.88 4.905 11.852 13.68 11.852 22.45 0 2.925-0.957 5.85-2.006 8.775-6.881 26.318-18.831 69.334-18.831 71.223-0.958 2.92-2.013 6.79-2.013 10.75 0 7.83 5.929 13.68 13.865 13.68 2.963 0 5.928-0.944 7.935-2.925l92.922-53.674c6.885-3.87 14.82-6.794 22.756-6.794 3.916 0 8.889 0.944 12.81 1.98 43.496 12.644 91.012 19.53 139.48 19.53 235.372 0 427.24-157.158 427.24-351.294 0-58.58-17.78-114.143-48.467-163.003l-491.39 280.07-2.963 1.98z"
                                                      fill="#09BB07" p-id="2412"></path>
                                            </svg>
                                            <span style="vertical-align: middle;">${item.name}</span>
                                        </div>
                                    </div>
                                </:if>
                                <:if test="${item.driver=='mqpay_alipay' || item.driver=='zlianpay_alipay' || item.driver=='yungouos_alipay' || item.driver=='xunhupay_alipay' || item.driver=='jiepay_alipay' || item.driver=='payjs_alipay' || item.driver=='alipay' || item.driver=='alipay_pc'}">
                                    <div class="layui-col-xs12 layui-col-sm6 layui-col-md6">
                                        <div class="pay-type-ali active" data-id="${item.driver}">
                                            <svg t="1602939269695" class="icon" viewBox="0 0 1024 1024"
                                                 version="1.1"
                                                 xmlns="http://www.w3.org/2000/svg" p-id="1127" width="32"
                                                 height="32"
                                                 style=" vertical-align: middle;">
                                                <path d="M902.095 652.871l-250.96-84.392s19.287-28.87 39.874-85.472c20.59-56.606 23.539-87.689 23.539-87.689l-162.454-1.339v-55.487l196.739-1.387v-39.227H552.055v-89.29h-96.358v89.294H272.133v39.227l183.564-1.304v59.513h-147.24v31.079h303.064s-3.337 25.223-14.955 56.606c-11.615 31.38-23.58 58.862-23.58 58.862s-142.3-49.804-217.285-49.804c-74.985 0-166.182 30.123-175.024 117.55-8.8 87.383 42.481 134.716 114.728 152.139 72.256 17.513 138.962-0.173 197.04-28.607 58.087-28.391 115.081-92.933 115.081-92.933l292.486 142.041c-11.932 69.3-72.067 119.914-142.387 119.844H266.37c-79.714 0.078-144.392-64.483-144.466-144.194V266.374c-0.074-79.72 64.493-144.399 144.205-144.47h491.519c79.714-0.073 144.396 64.49 144.466 144.203v386.764z m-365.76-48.895s-91.302 115.262-198.879 115.262c-107.623 0-130.218-54.767-130.218-94.155 0-39.34 22.373-82.144 113.943-88.333 91.519-6.18 215.2 67.226 215.2 67.226h-0.047z"
                                                      fill="#02A9F1" p-id="1128"
                                                      data-spm-anchor-id="a313x.7781069.0.i1"
                                                      class="selected"></path>
                                            </svg>
                                            <span style="vertical-align: middle;">${item.name}</span>
                                        </div>
                                    </div>
                                </:if>

                                <:if test="${item.driver == 'zlianpay_qqpay'}">
                                    <div class="layui-col-xs12 layui-col-sm6 layui-col-md6">
                                        <div class="pay-type-qq active" data-id="${item.driver}">
                                            <svg t="1635267582923" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6474" width="32" height="32" style="vertical-align: middle;">
                                                <path d="M266.4448 795.5456c-20.0704-36.608-40.0896-73.1648-60.416-110.2848-13.568 16.384-26.1632 33.536-40.8064 48.7424-20.0704 20.8384-33.0752 16.5376-41.1648-11.5712-14.1824-49.4592-3.072-95.8464 20.1728-139.1616 15.7696-29.3888 35.1744-57.1392 55.5008-83.6096 9.9328-12.9536 14.7968-24.3712 14.08-40.8064-1.3824-32.2048 0.2048-64.0512 27.0336-88.7296 5.2736-4.864 4.7104-16.9472 5.376-25.8048C251.904 269.0048 271.872 198.7584 329.9328 146.944c76.8512-68.5568 166.912-89.5488 266.3424-60.2624 97.024 28.5696 156.3648 94.1056 180.5312 191.8976 2.3552 9.6256 3.6352 19.5072 5.4272 29.2352 5.2736 29.0304 4.4032 57.9584 24.7808 85.0432 12.7488 16.9472 8.0896 46.6944 12.5952 70.4512 2.0992 11.0592 4.8128 23.6544 11.6224 31.9488 36.7616 44.8 69.12 92.3648 78.7456 150.3232 4.352 26.1632 1.0752 54.4256-3.328 80.9984-3.9424 23.9104-19.6608 27.2384-37.2224 9.216-15.2576-15.6672-28.3648-33.3824-42.5472-50.2784-20.2752 36.9664-40.3456 73.472-60.5696 110.336 12.2368 8.8064 26.112 16.9984 37.8368 27.5456 41.6256 37.5808 32.256 95.6416-20.8384 112.5376-86.1696 27.392-169.4208 22.2208-246.3232-32.6144-9.5232-6.8096-32.5632-5.632-42.8032 1.3824-79.9232 54.6304-165.2736 59.8528-252.9792 27.8016-44.3904-16.1792-50.8416-71.5776-15.9744-105.8816 11.8784-11.6736 26.6752-20.2752 41.216-31.0784z" fill="#2595E8" p-id="6475"></path><path d="M831.2832 495.1552c-6.8096-8.2944-9.5232-20.8896-11.6224-31.9488-4.5056-23.7568 0.2048-53.4528-12.5952-70.4512-20.3776-27.0848-19.5072-56.0128-24.7808-84.992-1.792-9.7792-3.072-19.6608-5.4272-29.2352-24.1664-97.792-83.5072-163.2768-180.5312-191.8976-99.4304-29.2864-189.4912-8.2944-266.3424 60.2624C271.9232 198.7072 251.9552 268.9536 246.272 344.2688c-0.6656 8.8576-0.1024 20.9408-5.376 25.8048-26.8288 24.6784-28.416 56.5248-27.0336 88.7296 0.7168 16.4864-4.1472 27.8528-14.08 40.8064-20.3264 26.5216-39.7312 54.2208-55.5008 83.6096-23.2448 43.3152-34.3552 89.7024-20.1728 139.1616 8.0384 28.16 21.0944 32.4096 41.1648 11.5712 14.6432-15.2064 27.1872-32.3584 40.8064-48.7424 20.3264 37.12 40.3456 73.6768 60.416 110.2848-14.5408 10.8032-29.2864 19.4048-41.0624 30.976-17.6128 17.3056-24.6784 39.9872-21.6576 60.3136 26.2656 3.4816 52.992 5.2736 80.2304 5.2736 254.2592 0 472.0128-156.416 562.2784-378.2144-4.9152-6.2464-9.9328-12.4928-15.0016-18.688z" fill="#3A9CED" p-id="6476"></path><path d="M717.9264 161.2288c-30.464-34.5088-70.8096-59.648-121.6-74.5984-99.4304-29.2864-189.4912-8.2944-266.3424 60.2624C271.9232 198.7072 251.9552 268.9536 246.272 344.2688c-0.6656 8.8576-0.1024 20.9408-5.376 25.8048-26.8288 24.6784-28.416 56.5248-27.0336 88.7296 0.7168 16.4864-4.1472 27.8528-14.08 40.8064-20.3264 26.5216-39.7312 54.2208-55.5008 83.6096-15.9232 29.696-26.112 60.8256-26.4704 93.3376h0.1024c304.0768 0.0512 555.8784-223.5904 600.0128-515.328z" fill="#59ADF8" p-id="6477"></path><path d="M531.1488 74.5984c-73.8304-5.376-141.4656 19.0464-201.1136 72.2432C271.9232 198.7072 251.9552 268.9536 246.272 344.2688c-0.6656 8.8576-0.1024 20.9408-5.376 25.8048-11.9808 11.008-18.8928 23.4496-22.784 36.7104 142.7968-65.536 255.7952-184.9344 313.0368-332.1856z" fill="#6BC2FC" p-id="6478"></path></svg>
                                            <span style="vertical-align: middle;">${item.name}</span>
                                        </div>
                                    </div>
                                </:if>

                                <:if test="${item.driver=='paypal'}">
                                    <div class="layui-col-xs12 layui-col-sm6 layui-col-md6">
                                        <div class="pay-type-paypal active" data-id="${item.driver}">
                                            <svg t="1629783614166" class="icon" viewBox="0 0 4220 1024"
                                                 version="1.1"
                                                 xmlns="http://www.w3.org/2000/svg"
                                                 p-id="2555"
                                                 height="25"
                                                 style="vertical-align: middle;">
                                                <path d="M3249.722604 229.409369h-232.537679c-15.641548 0-29.197556 11.470468-32.325865 27.112016l-93.849287 595.421589c-2.08554 11.470468 7.299389 21.898167 18.769857 21.898167h118.875764c11.470468 0 20.855397-8.342159 21.898167-18.769858l27.112016-168.928717c2.08554-15.641548 15.641548-27.112016 32.325866-27.112016h72.99389c153.287169 0 240.879837-74.03666 263.820774-221.06721 10.427699-63.608961 0-114.704684-29.197556-150.158859-31.283096-38.582485-89.678208-58.395112-167.885947-58.395112z m27.112016 216.89613c-12.513238 83.421589-76.1222 83.421589-137.645621 83.421589h-35.454175l25.026476-155.372709c1.04277-9.384929 9.384929-16.684318 18.769858-16.684318h15.641547c41.710794 0 81.336049 0 102.191447 23.983707 12.513238 14.598778 15.641548 35.454175 11.470468 64.651731z"
                                                      fill="#009CDE" p-id="2556"></path>
                                                <path d="M1594.84684 229.409369h-232.537678c-15.641548 0-29.197556 11.470468-32.325866 27.112016l-93.849287 595.421589c-2.08554 11.470468 7.299389 21.898167 18.769857 21.898167h110.533605c15.641548 0 29.197556-11.470468 32.325866-27.112017l25.026476-160.586558c2.08554-15.641548 15.641548-27.112016 32.325866-27.112016h72.99389c153.287169 0 240.879837-74.03666 263.820774-221.06721 10.427699-63.608961 0-114.704684-29.197556-150.158859-31.283096-38.582485-89.678208-58.395112-167.885947-58.395112z m27.112016 216.89613c-12.513238 83.421589-76.1222 83.421589-137.645621 83.421589h-35.454175l25.026476-155.372709c1.04277-9.384929 9.384929-16.684318 18.769858-16.684318h15.641548c41.710794 0 81.336049 0 102.191446 23.983707 12.513238 14.598778 15.641548 35.454175 11.470468 64.651731zM2288.288795 443.177189h-111.576375c-9.384929 0-17.727088 7.299389-18.769857 16.684318l-5.213849 31.283096-7.299389-11.470469c-23.983707-34.411405-77.164969-46.924644-131.389002-46.924643-123.046843 0-227.323829 92.806517-248.179226 223.152749-10.427699 64.651731 4.171079 127.217923 41.710794 171.014257 34.411405 39.625255 82.378819 56.309572 139.731161 56.309572 99.063136 0 153.287169-63.608961 153.287169-63.608961l-5.21385 31.283096c-2.08554 11.470468 7.299389 21.898167 18.769858 21.898167h100.105906c15.641548 0 29.197556-11.470468 32.325866-27.112017l60.480652-380.610998c2.08554-10.427699-6.256619-21.898167-18.769858-21.898167z m-154.329939 216.896131c-10.427699 63.608961-61.523422 106.362525-125.132383 106.362525-32.325866 0-58.395112-10.427699-75.079429-30.240326-16.684318-19.812627-22.940937-46.924644-17.727088-78.207739 10.427699-62.566191 61.523422-107.405295 124.089613-107.405295 31.283096 0 57.352342 10.427699 74.03666 30.240326 17.727088 20.855397 25.026477 47.967413 19.812627 79.250509z"
                                                      fill="#003087" p-id="2557"></path>
                                                <path d="M3943.164559 443.177189h-111.576375c-9.384929 0-17.727088 7.299389-18.769857 16.684318l-5.21385 31.283096-7.299389-11.470469c-23.983707-34.411405-77.164969-46.924644-131.389002-46.924643-123.046843 0-227.323829 92.806517-248.179226 223.152749-10.427699 64.651731 4.171079 127.217923 41.710795 171.014257 34.411405 39.625255 82.378819 56.309572 139.73116 56.309572 99.063136 0 153.287169-63.608961 153.28717-63.608961l-5.21385 31.283096c-2.08554 11.470468 7.299389 21.898167 18.769858 21.898167h100.105906c15.641548 0 29.197556-11.470468 32.325866-27.112017l60.480651-380.610998c2.08554-10.427699-6.256619-21.898167-18.769857-21.898167z m-154.329939 216.896131c-10.427699 63.608961-61.523422 106.362525-125.132383 106.362525-32.325866 0-58.395112-10.427699-75.07943-30.240326-16.684318-19.812627-22.940937-46.924644-17.727087-78.207739 10.427699-62.566191 61.523422-107.405295 124.089613-107.405295 31.283096 0 57.352342 10.427699 74.03666 30.240326 17.727088 20.855397 25.026477 47.967413 19.812627 79.250509z"
                                                      fill="#009CDE" p-id="2558"></path>
                                                <path d="M2880.582074 443.177189h-111.576375c-10.427699 0-20.855397 5.213849-27.112016 14.598778l-154.329939 227.323829-65.694501-217.9389c-4.171079-13.556008-16.684318-22.940937-31.283096-22.940937h-109.490835c-13.556008 0-22.940937 13.556008-18.769857 26.069247l123.046843 360.79837-115.747454 162.672098c-9.384929 12.513238 0 30.240326 15.641548 30.240326h111.576375c10.427699 0 20.855397-5.213849 26.069246-13.556008l371.226069-535.983707c11.470468-13.556008 2.08554-31.283096-13.556008-31.283096z"
                                                      fill="#003087" p-id="2559"></path>
                                                <path d="M4074.553561 245.050916l-94.892057 605.849288c-2.08554 11.470468 7.299389 21.898167 18.769857 21.898167h95.934827c15.641548 0 29.197556-11.470468 32.325866-27.112017l93.849287-595.421588c2.08554-11.470468-7.299389-21.898167-18.769857-21.898167h-107.405296c-10.427699 1.04277-18.769857 7.299389-19.812627 16.684317z"
                                                      fill="#009CDE" p-id="2560"></path>
                                                <path d="M782.529121 259.649695c12.513238-79.250509 0-133.474542-42.753564-182.484726C691.808143 22.940937 606.301015 0 496.81018 0H178.765374c-21.898167 0-41.710794 16.684318-44.839104 38.582485L0.451728 879.05499c-3.12831 16.684318 10.427699 31.283096 27.112016 31.283096h196.040733l-13.556008 85.507128c-2.08554 14.598778 9.384929 27.112016 23.983707 27.112016h165.800407c19.812627 0 36.496945-14.598778 39.625255-33.368635l2.08554-8.342159 31.283095-198.126273 2.08554-10.427699c3.12831-19.812627 19.812627-33.368635 39.625255-33.368635h25.026476c160.586558 0 285.718941-64.651731 322.215886-253.393075 15.641548-79.250509 7.299389-144.94501-33.368635-190.826884-12.513238-13.556008-28.154786-26.069246-45.881874-35.454175"
                                                      fill="#009CDE" p-id="2561"></path>
                                                <path d="M782.529121 259.649695c12.513238-79.250509 0-133.474542-42.753564-182.484726C691.808143 22.940937 606.301015 0 496.81018 0H178.765374c-21.898167 0-41.710794 16.684318-44.839104 38.582485L0.451728 879.05499c-3.12831 16.684318 10.427699 31.283096 27.112016 31.283096h196.040733l49.010184-312.830958-1.04277 9.384929c3.12831-21.898167 21.898167-38.582485 44.839104-38.582485h93.849287c183.527495 0 327.429735-74.03666 369.140529-289.89002l3.12831-18.769857"
                                                      fill="#012169" p-id="2562"></path>
                                                <path d="M326.838693 260.692464c2.08554-13.556008 10.427699-23.983707 21.898167-30.240326 5.213849-2.08554 11.470468-4.171079 16.684318-4.171079h250.264766c29.197556 0 57.352342 2.08554 82.378819 6.256619 7.299389 1.04277 14.598778 2.08554 20.855397 4.17108 7.299389 1.04277 13.556008 3.12831 19.812627 5.213849l9.384929 3.128309c12.513238 4.171079 23.983707 9.384929 34.411405 14.598779 12.513238-79.250509 0-133.474542-42.753564-182.484726C691.808143 22.940937 606.301015 0 496.81018 0H178.765374c-21.898167 0-41.710794 16.684318-44.839104 38.582485L0.451728 879.05499c-3.12831 16.684318 10.427699 31.283096 27.112016 31.283096h196.040733l49.010184-312.830958L326.838693 260.692464z"
                                                      fill="#003087" p-id="2563"></path>
                                            </svg>
                                        </div>
                                    </div>
                                </:if>
                            </:if>
                            <:if test="${item.andIncrement != 0}">
                                <:if test="${item.driver=='mqpay_wxpay' || item.driver=='zlianpay_wxpay' || item.driver=='yungouos_wxpay' || item.driver=='xunhupay_wxpay' || item.driver=='jiepay_wxpay' || item.driver=='payjs_wxpay' || item.driver=='wxpay_h5' || item.driver=='wxpay'}">
                                    <div class="layui-col-xs12 layui-col-sm6 layui-col-md6">
                                        <div class="pay-type-wexin" data-id="${item.driver}">
                                            <svg t="1617264231274" class="icon" viewBox="0 0 1024 1024"
                                                 version="1.1"
                                                 xmlns="http://www.w3.org/2000/svg" p-id="2411" width="32"
                                                 height="32"
                                                 style=" vertical-align: middle;">
                                                <path d="M395.846 603.585c-3.921 1.98-7.936 2.925-12.81 2.925-10.9 0-19.791-5.85-24.764-14.625l-2.006-3.864-78.106-167.913c-0.956-1.98-0.956-3.865-0.956-5.845 0-7.83 5.928-13.68 13.863-13.68 2.965 0 5.928 0.944 8.893 2.924l91.965 64.43c6.884 3.864 14.82 6.79 23.708 6.79 4.972 0 9.85-0.945 14.822-2.926L861.71 282.479c-77.149-89.804-204.684-148.384-349.135-148.384-235.371 0-427.242 157.158-427.242 351.294 0 105.368 57.361 201.017 147.323 265.447 6.88 4.905 11.852 13.68 11.852 22.45 0 2.925-0.957 5.85-2.006 8.775-6.881 26.318-18.831 69.334-18.831 71.223-0.958 2.92-2.013 6.79-2.013 10.75 0 7.83 5.929 13.68 13.865 13.68 2.963 0 5.928-0.944 7.935-2.925l92.922-53.674c6.885-3.87 14.82-6.794 22.756-6.794 3.916 0 8.889 0.944 12.81 1.98 43.496 12.644 91.012 19.53 139.48 19.53 235.372 0 427.24-157.158 427.24-351.294 0-58.58-17.78-114.143-48.467-163.003l-491.39 280.07-2.963 1.98z"
                                                      fill="#09BB07" p-id="2412"></path>
                                            </svg>
                                            <span style="vertical-align: middle;">${item.name}</span>
                                        </div>
                                    </div>
                                </:if>

                                <:if test="${item.driver=='mqpay_alipay' || item.driver=='zlianpay_alipay' || item.driver=='yungouos_alipay' || item.driver=='xunhupay_alipay' || item.driver=='jiepay_alipay' || item.driver=='payjs_alipay' || item.driver=='alipay' || item.driver=='alipay_pc'}">
                                    <div class="layui-col-xs12 layui-col-sm6 layui-col-md6">
                                        <div class="pay-type-ali" data-id="${item.driver}">
                                            <svg t="1602939269695" class="icon" viewBox="0 0 1024 1024"
                                                 version="1.1"
                                                 xmlns="http://www.w3.org/2000/svg" p-id="1127" width="32"
                                                 height="32"
                                                 style=" vertical-align: middle;">
                                                <path d="M902.095 652.871l-250.96-84.392s19.287-28.87 39.874-85.472c20.59-56.606 23.539-87.689 23.539-87.689l-162.454-1.339v-55.487l196.739-1.387v-39.227H552.055v-89.29h-96.358v89.294H272.133v39.227l183.564-1.304v59.513h-147.24v31.079h303.064s-3.337 25.223-14.955 56.606c-11.615 31.38-23.58 58.862-23.58 58.862s-142.3-49.804-217.285-49.804c-74.985 0-166.182 30.123-175.024 117.55-8.8 87.383 42.481 134.716 114.728 152.139 72.256 17.513 138.962-0.173 197.04-28.607 58.087-28.391 115.081-92.933 115.081-92.933l292.486 142.041c-11.932 69.3-72.067 119.914-142.387 119.844H266.37c-79.714 0.078-144.392-64.483-144.466-144.194V266.374c-0.074-79.72 64.493-144.399 144.205-144.47h491.519c79.714-0.073 144.396 64.49 144.466 144.203v386.764z m-365.76-48.895s-91.302 115.262-198.879 115.262c-107.623 0-130.218-54.767-130.218-94.155 0-39.34 22.373-82.144 113.943-88.333 91.519-6.18 215.2 67.226 215.2 67.226h-0.047z"
                                                      fill="#02A9F1" p-id="1128"
                                                      data-spm-anchor-id="a313x.7781069.0.i1"
                                                      class="selected"></path>
                                            </svg>
                                            <span style="vertical-align: middle;">${item.name}</span>
                                        </div>
                                    </div>
                                </:if>

                                <:if test="${item.driver == 'zlianpay_qqpay'}">
                                    <div class="layui-col-xs12 layui-col-sm6 layui-col-md6">
                                        <div class="pay-type-qq" data-id="${item.driver}">
                                            <svg t="1635267582923" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6474" width="32" height="32" style="vertical-align: middle;">
                                                <path d="M266.4448 795.5456c-20.0704-36.608-40.0896-73.1648-60.416-110.2848-13.568 16.384-26.1632 33.536-40.8064 48.7424-20.0704 20.8384-33.0752 16.5376-41.1648-11.5712-14.1824-49.4592-3.072-95.8464 20.1728-139.1616 15.7696-29.3888 35.1744-57.1392 55.5008-83.6096 9.9328-12.9536 14.7968-24.3712 14.08-40.8064-1.3824-32.2048 0.2048-64.0512 27.0336-88.7296 5.2736-4.864 4.7104-16.9472 5.376-25.8048C251.904 269.0048 271.872 198.7584 329.9328 146.944c76.8512-68.5568 166.912-89.5488 266.3424-60.2624 97.024 28.5696 156.3648 94.1056 180.5312 191.8976 2.3552 9.6256 3.6352 19.5072 5.4272 29.2352 5.2736 29.0304 4.4032 57.9584 24.7808 85.0432 12.7488 16.9472 8.0896 46.6944 12.5952 70.4512 2.0992 11.0592 4.8128 23.6544 11.6224 31.9488 36.7616 44.8 69.12 92.3648 78.7456 150.3232 4.352 26.1632 1.0752 54.4256-3.328 80.9984-3.9424 23.9104-19.6608 27.2384-37.2224 9.216-15.2576-15.6672-28.3648-33.3824-42.5472-50.2784-20.2752 36.9664-40.3456 73.472-60.5696 110.336 12.2368 8.8064 26.112 16.9984 37.8368 27.5456 41.6256 37.5808 32.256 95.6416-20.8384 112.5376-86.1696 27.392-169.4208 22.2208-246.3232-32.6144-9.5232-6.8096-32.5632-5.632-42.8032 1.3824-79.9232 54.6304-165.2736 59.8528-252.9792 27.8016-44.3904-16.1792-50.8416-71.5776-15.9744-105.8816 11.8784-11.6736 26.6752-20.2752 41.216-31.0784z" fill="#2595E8" p-id="6475"></path><path d="M831.2832 495.1552c-6.8096-8.2944-9.5232-20.8896-11.6224-31.9488-4.5056-23.7568 0.2048-53.4528-12.5952-70.4512-20.3776-27.0848-19.5072-56.0128-24.7808-84.992-1.792-9.7792-3.072-19.6608-5.4272-29.2352-24.1664-97.792-83.5072-163.2768-180.5312-191.8976-99.4304-29.2864-189.4912-8.2944-266.3424 60.2624C271.9232 198.7072 251.9552 268.9536 246.272 344.2688c-0.6656 8.8576-0.1024 20.9408-5.376 25.8048-26.8288 24.6784-28.416 56.5248-27.0336 88.7296 0.7168 16.4864-4.1472 27.8528-14.08 40.8064-20.3264 26.5216-39.7312 54.2208-55.5008 83.6096-23.2448 43.3152-34.3552 89.7024-20.1728 139.1616 8.0384 28.16 21.0944 32.4096 41.1648 11.5712 14.6432-15.2064 27.1872-32.3584 40.8064-48.7424 20.3264 37.12 40.3456 73.6768 60.416 110.2848-14.5408 10.8032-29.2864 19.4048-41.0624 30.976-17.6128 17.3056-24.6784 39.9872-21.6576 60.3136 26.2656 3.4816 52.992 5.2736 80.2304 5.2736 254.2592 0 472.0128-156.416 562.2784-378.2144-4.9152-6.2464-9.9328-12.4928-15.0016-18.688z" fill="#3A9CED" p-id="6476"></path><path d="M717.9264 161.2288c-30.464-34.5088-70.8096-59.648-121.6-74.5984-99.4304-29.2864-189.4912-8.2944-266.3424 60.2624C271.9232 198.7072 251.9552 268.9536 246.272 344.2688c-0.6656 8.8576-0.1024 20.9408-5.376 25.8048-26.8288 24.6784-28.416 56.5248-27.0336 88.7296 0.7168 16.4864-4.1472 27.8528-14.08 40.8064-20.3264 26.5216-39.7312 54.2208-55.5008 83.6096-15.9232 29.696-26.112 60.8256-26.4704 93.3376h0.1024c304.0768 0.0512 555.8784-223.5904 600.0128-515.328z" fill="#59ADF8" p-id="6477"></path><path d="M531.1488 74.5984c-73.8304-5.376-141.4656 19.0464-201.1136 72.2432C271.9232 198.7072 251.9552 268.9536 246.272 344.2688c-0.6656 8.8576-0.1024 20.9408-5.376 25.8048-11.9808 11.008-18.8928 23.4496-22.784 36.7104 142.7968-65.536 255.7952-184.9344 313.0368-332.1856z" fill="#6BC2FC" p-id="6478"></path></svg>
                                            <span style="vertical-align: middle;">${item.name}</span>
                                        </div>
                                    </div>
                                </:if>

                                <:if test="${item.driver=='paypal'}">
                                    <div class="layui-col-xs12 layui-col-sm6 layui-col-md6">
                                        <div class="pay-type-paypal" data-id="${item.driver}">
                                            <svg t="1629783614166" class="icon" viewBox="0 0 4220 1024"
                                                 version="1.1"
                                                 xmlns="http://www.w3.org/2000/svg"
                                                 p-id="2555"
                                                 height="25"
                                                 style="vertical-align: middle;">
                                                <path d="M3249.722604 229.409369h-232.537679c-15.641548 0-29.197556 11.470468-32.325865 27.112016l-93.849287 595.421589c-2.08554 11.470468 7.299389 21.898167 18.769857 21.898167h118.875764c11.470468 0 20.855397-8.342159 21.898167-18.769858l27.112016-168.928717c2.08554-15.641548 15.641548-27.112016 32.325866-27.112016h72.99389c153.287169 0 240.879837-74.03666 263.820774-221.06721 10.427699-63.608961 0-114.704684-29.197556-150.158859-31.283096-38.582485-89.678208-58.395112-167.885947-58.395112z m27.112016 216.89613c-12.513238 83.421589-76.1222 83.421589-137.645621 83.421589h-35.454175l25.026476-155.372709c1.04277-9.384929 9.384929-16.684318 18.769858-16.684318h15.641547c41.710794 0 81.336049 0 102.191447 23.983707 12.513238 14.598778 15.641548 35.454175 11.470468 64.651731z"
                                                      fill="#009CDE" p-id="2556"></path>
                                                <path d="M1594.84684 229.409369h-232.537678c-15.641548 0-29.197556 11.470468-32.325866 27.112016l-93.849287 595.421589c-2.08554 11.470468 7.299389 21.898167 18.769857 21.898167h110.533605c15.641548 0 29.197556-11.470468 32.325866-27.112017l25.026476-160.586558c2.08554-15.641548 15.641548-27.112016 32.325866-27.112016h72.99389c153.287169 0 240.879837-74.03666 263.820774-221.06721 10.427699-63.608961 0-114.704684-29.197556-150.158859-31.283096-38.582485-89.678208-58.395112-167.885947-58.395112z m27.112016 216.89613c-12.513238 83.421589-76.1222 83.421589-137.645621 83.421589h-35.454175l25.026476-155.372709c1.04277-9.384929 9.384929-16.684318 18.769858-16.684318h15.641548c41.710794 0 81.336049 0 102.191446 23.983707 12.513238 14.598778 15.641548 35.454175 11.470468 64.651731zM2288.288795 443.177189h-111.576375c-9.384929 0-17.727088 7.299389-18.769857 16.684318l-5.213849 31.283096-7.299389-11.470469c-23.983707-34.411405-77.164969-46.924644-131.389002-46.924643-123.046843 0-227.323829 92.806517-248.179226 223.152749-10.427699 64.651731 4.171079 127.217923 41.710794 171.014257 34.411405 39.625255 82.378819 56.309572 139.731161 56.309572 99.063136 0 153.287169-63.608961 153.287169-63.608961l-5.21385 31.283096c-2.08554 11.470468 7.299389 21.898167 18.769858 21.898167h100.105906c15.641548 0 29.197556-11.470468 32.325866-27.112017l60.480652-380.610998c2.08554-10.427699-6.256619-21.898167-18.769858-21.898167z m-154.329939 216.896131c-10.427699 63.608961-61.523422 106.362525-125.132383 106.362525-32.325866 0-58.395112-10.427699-75.079429-30.240326-16.684318-19.812627-22.940937-46.924644-17.727088-78.207739 10.427699-62.566191 61.523422-107.405295 124.089613-107.405295 31.283096 0 57.352342 10.427699 74.03666 30.240326 17.727088 20.855397 25.026477 47.967413 19.812627 79.250509z"
                                                      fill="#003087" p-id="2557"></path>
                                                <path d="M3943.164559 443.177189h-111.576375c-9.384929 0-17.727088 7.299389-18.769857 16.684318l-5.21385 31.283096-7.299389-11.470469c-23.983707-34.411405-77.164969-46.924644-131.389002-46.924643-123.046843 0-227.323829 92.806517-248.179226 223.152749-10.427699 64.651731 4.171079 127.217923 41.710795 171.014257 34.411405 39.625255 82.378819 56.309572 139.73116 56.309572 99.063136 0 153.287169-63.608961 153.28717-63.608961l-5.21385 31.283096c-2.08554 11.470468 7.299389 21.898167 18.769858 21.898167h100.105906c15.641548 0 29.197556-11.470468 32.325866-27.112017l60.480651-380.610998c2.08554-10.427699-6.256619-21.898167-18.769857-21.898167z m-154.329939 216.896131c-10.427699 63.608961-61.523422 106.362525-125.132383 106.362525-32.325866 0-58.395112-10.427699-75.07943-30.240326-16.684318-19.812627-22.940937-46.924644-17.727087-78.207739 10.427699-62.566191 61.523422-107.405295 124.089613-107.405295 31.283096 0 57.352342 10.427699 74.03666 30.240326 17.727088 20.855397 25.026477 47.967413 19.812627 79.250509z"
                                                      fill="#009CDE" p-id="2558"></path>
                                                <path d="M2880.582074 443.177189h-111.576375c-10.427699 0-20.855397 5.213849-27.112016 14.598778l-154.329939 227.323829-65.694501-217.9389c-4.171079-13.556008-16.684318-22.940937-31.283096-22.940937h-109.490835c-13.556008 0-22.940937 13.556008-18.769857 26.069247l123.046843 360.79837-115.747454 162.672098c-9.384929 12.513238 0 30.240326 15.641548 30.240326h111.576375c10.427699 0 20.855397-5.213849 26.069246-13.556008l371.226069-535.983707c11.470468-13.556008 2.08554-31.283096-13.556008-31.283096z"
                                                      fill="#003087" p-id="2559"></path>
                                                <path d="M4074.553561 245.050916l-94.892057 605.849288c-2.08554 11.470468 7.299389 21.898167 18.769857 21.898167h95.934827c15.641548 0 29.197556-11.470468 32.325866-27.112017l93.849287-595.421588c2.08554-11.470468-7.299389-21.898167-18.769857-21.898167h-107.405296c-10.427699 1.04277-18.769857 7.299389-19.812627 16.684317z"
                                                      fill="#009CDE" p-id="2560"></path>
                                                <path d="M782.529121 259.649695c12.513238-79.250509 0-133.474542-42.753564-182.484726C691.808143 22.940937 606.301015 0 496.81018 0H178.765374c-21.898167 0-41.710794 16.684318-44.839104 38.582485L0.451728 879.05499c-3.12831 16.684318 10.427699 31.283096 27.112016 31.283096h196.040733l-13.556008 85.507128c-2.08554 14.598778 9.384929 27.112016 23.983707 27.112016h165.800407c19.812627 0 36.496945-14.598778 39.625255-33.368635l2.08554-8.342159 31.283095-198.126273 2.08554-10.427699c3.12831-19.812627 19.812627-33.368635 39.625255-33.368635h25.026476c160.586558 0 285.718941-64.651731 322.215886-253.393075 15.641548-79.250509 7.299389-144.94501-33.368635-190.826884-12.513238-13.556008-28.154786-26.069246-45.881874-35.454175"
                                                      fill="#009CDE" p-id="2561"></path>
                                                <path d="M782.529121 259.649695c12.513238-79.250509 0-133.474542-42.753564-182.484726C691.808143 22.940937 606.301015 0 496.81018 0H178.765374c-21.898167 0-41.710794 16.684318-44.839104 38.582485L0.451728 879.05499c-3.12831 16.684318 10.427699 31.283096 27.112016 31.283096h196.040733l49.010184-312.830958-1.04277 9.384929c3.12831-21.898167 21.898167-38.582485 44.839104-38.582485h93.849287c183.527495 0 327.429735-74.03666 369.140529-289.89002l3.12831-18.769857"
                                                      fill="#012169" p-id="2562"></path>
                                                <path d="M326.838693 260.692464c2.08554-13.556008 10.427699-23.983707 21.898167-30.240326 5.213849-2.08554 11.470468-4.171079 16.684318-4.171079h250.264766c29.197556 0 57.352342 2.08554 82.378819 6.256619 7.299389 1.04277 14.598778 2.08554 20.855397 4.17108 7.299389 1.04277 13.556008 3.12831 19.812627 5.213849l9.384929 3.128309c12.513238 4.171079 23.983707 9.384929 34.411405 14.598779 12.513238-79.250509 0-133.474542-42.753564-182.484726C691.808143 22.940937 606.301015 0 496.81018 0H178.765374c-21.898167 0-41.710794 16.684318-44.839104 38.582485L0.451728 879.05499c-3.12831 16.684318 10.427699 31.283096 27.112016 31.283096h196.040733l49.010184-312.830958L326.838693 260.692464z"
                                                      fill="#003087" p-id="2563"></path>
                                            </svg>
                                        </div>
                                    </div>
                                </:if>
                            </:if>
                        </:for>
                    </div>
                </div>

                <div class="buy-btn-group">
                        <span class="price">
                            <span class="small" id="symbol">￥</span>
                            <span id="goodsprice2" style="font-size: 29px; font-weight: bold;">0.00</span>
                        </span>
                    <button id="btnPay" class="layui-btn layui-btn-warm layui-btn-lg btn-group-show">
                        <i class="layui-icon layui-icon-cart"></i> 提交订单
                    </button>
                </div>
            </div>

            <div class="layui-card zlian-card-controller-1 card-shows" style="border-radius: 5px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">
                <div class="layui-card-header">
                    <img src="${ctxPath}/theme/night/images/details.svg">
                    商品详情
                    <span class="pull-right" style="font-weight: 400; font-size: 16px;">请详细阅读如下说明</span>
                </div>
                <div class="layui-card-body" style="padding: 15px 15px">
                    <div class="list_info">
                        ${products.pdInfo!}
                    </div>
                </div>
            </div>

        </div>

    </div>

    <div class="to-top">
        <div id="phone-code">
            <img src="/file/enQrcode?url=${website.websiteUrl}/product/${products.link}" alt="微信二维码">
        </div>
        <div class="intercom-box" id="item-phone">
            <div class="to-intercom">
                <div>
                    <svg width="25" height="25" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="11" y="4" width="26" height="40" rx="3" fill="none" stroke="#ffffff" stroke-width="4"/>
                        <path d="M22 10L26 10" stroke="#ffffff" stroke-width="4" stroke-linecap="round"
                              stroke-linejoin="round"/>
                        <path d="M20 38H28" stroke="#ffffff" stroke-width="4" stroke-linecap="round"
                              stroke-linejoin="round"/>
                    </svg>
                </div>
            </div>
        </div>
    </div>

</div>

<!-- footer -->
<:include file="./common/footer.html" websiteName="${website.websiteName}" beianIcp="${website.beianIcp}"/>
<!-- js部分 -->
<:include file="./common/js.html"/>
<script>
    layui.use(['layer', 'form', 'notice'], function () {
        var $ = layui.jquery;
        var layer = layui.layer;
        var form = layui.form;
        var notice = layui.notice;
        var product1 = {};

        var A = document.getElementById("item-phone"), M = document.getElementById("phone-code");
        A.addEventListener("mouseenter", function () {
            M.style.visibility = "visible", M.style.opacity = "1"
        }), A.addEventListener("mouseleave", function () {
            M.style.visibility = "hidden", M.style.opacity = "0"
        })

        //加减商品数量
        let orderNumber = 1;
        let numDoc = $("#orderNumber");
        $('.sub').click(function () {
            if (orderNumber <= 1) return layer.msg('购买数量不能低于1件');
            orderNumber--;

            if (product1.isWholesale == 1) {
                var wholesale = product1.wholesale;
                var s = wholesale.split("\n");

                var price = orderNumber * product1.price;
                $("#goodsprice2").text(price.toFixed(2));

                for (let i = 0; i < s.length; i++) {
                    var ss = s[i].split("=");
                    if (orderNumber >= ss[0]) {
                        var price = orderNumber * ss[1];
                        $("#goodsprice2").text(price.toFixed(2));
                    }
                }
            } else {
                var price = orderNumber * product1.price;
                $("#goodsprice2").text(price.toFixed(2));
            }
            numDoc.val(orderNumber);
        })
        $('.add').click(function () {
            if (orderNumber >= product1.cardsCount) {
                return layer.msg('购买数量不能多于库存数量');
            }
            orderNumber++;
            if (product1.isWholesale == 1) {
                var wholesale = product1.wholesale;
                var s = wholesale.split("\n");

                var price = orderNumber * product1.price;
                $("#goodsprice2").text(price.toFixed(2));

                for (let i = 0; i < s.length; i++) {
                    var ss = s[i].split("=");
                    if (orderNumber >= ss[0]) {
                        var price = orderNumber * ss[1];
                        $("#goodsprice2").text(price.toFixed(2));
                    }
                }
            } else {
                var price = orderNumber * product1.price;
                $("#goodsprice2").text(price.toFixed(2));
            }
            numDoc.val(orderNumber + '');
        })
        numDoc.change(function () {
            let val = parseInt($(this).val());
            if (val <= 0) {
                $(this).val(1);
                orderNumber = 1;
                return layer.msg('购买数量不能低于1件');
            }
            if (val > product1.cardsCount) {
                $(this).val(product1.cardsCount);
                orderNumber = product1.cardsCount;
                return layer.msg('购买数量不能多于库存数量');
            }
            orderNumber = val;
        })

        // 支付方式点击事件
        $('.pay-type-group .layui-row .layui-col-md6>div').click(function () {
            $('.pay-type-group .layui-row .layui-col-md6>div').removeClass('active');
            $(this).addClass('active');

            var payType = $('.pay-type-group .layui-row .layui-col-md6>div.active').data('id');
            if (payType == 'paypal') {
                $("#symbol").text('$');
            } else {
                $("#symbol").text('¥');
            }
        });

        // 立即支付
        $('#btnPay').click(function () {
            doPay();
        });

        $.post('/getProductById', {
            id: '${products.id!}'
        }, function (res) {
            if (0 === res.code) {
                var product = res.data;
                product1 = product;
                $("#goodsprice").text(product.price);
                $("#goodsprice2").text(product.price);
                $("#cardsCount").text(product.cardsCount);
            } else {
                layer.msg(res.msg, {icon: 2, anim: 6});
            }
        });

        function doPay() {
            var number = $("#orderNumber").val() // 购买数量
            var contact = $("#contact").val() // 邮箱账号
            var coupon = $("#coupon").val() // 优惠券
            var payType = $('.pay-type-group .layui-row .layui-col-md6>div.active').data('id');
            var password = $('#password').val();
            <:if test="${isCustomize == 1}">
            <:for items="${customizeList}" var="item">
            var ${item.field} = $('#${item.field}').val();
            </:for>
            </:if>
            $.post('/buy', {
                goodsId: product1.id,
                number: number,
                contact: contact,
                coupon: coupon,
                payType: payType,
                password: password
                <:if test="${isCustomize == 1}">
                <:for items="${customizeList}" var="item">
                ,${item.field}: ${item.field}
                </:for>
                </:if>
            }, function (res) {
                if (res.code == 200) {
                    layer.confirm(getHtml(res.data), {
                        title: '订单确认',
                        btn: ['<span style="color: rgb(255, 104, 104, 0.9)">立即支付</span>', '支付完成'] //按钮
                    }, function () {
                        if (payType == 'alipay_pc') {
                            window.open('${ctxPath}/alipayPc/' + res.data.member)
                        } else {
                            window.open('${ctxPath}/pay/' + res.data.member)
                        }
                    }, function () {
                        window.open('${ctxPath}/pay/state/' + res.data.member)
                    });
                } else {
                    layer.alert(res.msg, {title: '错误提示', btn: '知道啦', shade: .1, skin: 'layui-layer-admin'});
                }
            }, 'json');
        }

        function getHtml(mData) {
            var html = '' +
                '<div class="weui-form-preview__hd">\n' +
                '    <div class="weui-form-preview__item">\n' +
                '        <label class="weui-form-preview__label">付款金额</label>\n' +
                '        <em class="weui-form-preview__value">￥ ' + mData.money + '</em>\n' +
                '    </div>\n' +
                '</div>' +
                '<div class="weui-form-preview__bds">\n' +
                '    <div class="weui-form-preview__items">\n' +
                '        <label class="weui-form-preview__labels">订单号</label>\n' +
                '        <span class="weui-form-preview__values">' + mData.member + '</span>\n' +
                '    </div>\n' +
                '    <div class="weui-form-preview__items">\n' +
                '        <label class="weui-form-preview__labels">商品总价</label>\n' +
                '        <span class="weui-form-preview__values">' + mData.total_price + '</span>\n' +
                '    </div>\n' +
                '    <div class="weui-form-preview__items">\n' +
                '        <label class="weui-form-preview__labels">说明</label>\n' +
                '        <span class="weui-form-preview__values">妥善保存以上订单号用于查询</span>\n' +
                '    </div>\n' +
                '</div>' +
                '<div class="weui-form-preview__buttom"><span class="weui-form-preview__text">订单已提交请尽快完成支付！</span></div>';
            return html;
        }

    });
</script>
</body>
</html>